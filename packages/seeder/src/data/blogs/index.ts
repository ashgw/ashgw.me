import { readFileSync } from "fs";
import path from "path";
import { fileURLToPath } from "url";

import type { PostCategory } from "@ashgw/db/raw";

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

interface Blog {
  slug: string;
  title: string;
  seoTitle: string;
  summary: string;
  isReleased: boolean;
  firstModDate: Date;
  lastModDate: Date;
  minutesToRead: number;
  tags: string[];
  category: PostCategory;
  mdxContentRaw: string;
}

function getCorresponsingMdxContent(slug: string): string {
  const filePath = path.join(__dirname, `${slug}.mdx`);
  const fileContent = readFileSync(filePath, "utf-8");
  if (fileContent.startsWith("---")) {
    const parts = fileContent.split("---");
    return parts.slice(2).join("---").trim();
  }
  return fileContent.trim();
}

export const blogs: Blog[] = [
  {
    slug: "branded-types",
    title: "Branded Types",
    seoTitle: "Write Safer TypeScript with Branded Types",
    summary: "Write safer TypeScript with branded types",
    isReleased: true,
    firstModDate: new Date("2024-04-27T09:15:00-04:00"),
    lastModDate: new Date("2024-04-27T09:15:00-04:00"),
    minutesToRead: 4,
    tags: ["typescript", "typing"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("branded-types"),
  },
  {
    slug: "distributive-types",
    title: "Distributive Types",
    seoTitle: "The unintended side effects of TypeScript's distributive types",
    summary: "The unintended side effects of TypeScript's distributive types",
    isReleased: true,
    firstModDate: new Date("2023-02-09T08:15:00-04:00"),
    lastModDate: new Date("2023-02-09T08:15:00-04:00"),
    minutesToRead: 10,
    tags: ["typescript", "typing"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("distributive-types"),
  },
  {
    slug: "debates",
    title: "Debates",
    seoTitle: "I won't debate you",
    summary: "I won't debate you",
    isReleased: true,
    firstModDate: new Date("2024-01-01T19:45:00-04:00"),
    lastModDate: new Date("2024-01-01T19:45:00-04:00"),
    minutesToRead: 3,
    tags: ["debates", "communication"],
    category: "PHILOSOPHY",
    mdxContentRaw: getCorresponsingMdxContent("debates"),
  },
  {
    slug: "documentation-over-communication",
    title: "Docs > Communication",
    seoTitle: "Why Documentation Beats Communication in Software Development",
    summary: "Hopping on a 'quick call' is a waste of time and money",
    isReleased: true,
    firstModDate: new Date("2024-06-08T09:15:00-04:00"),
    lastModDate: new Date("2024-06-08T09:15:00-04:00"),
    minutesToRead: 6,
    tags: ["quality", "maintainability"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent(
      "documentation-over-communication",
    ),
  },
  {
    slug: "dumb-questions",
    title: "Dumb Questions",
    seoTitle: "Why Dumb Questions Are a Sign of System Failure",
    summary: "Why they exist and what they reveal about systemic inefficiency",
    isReleased: true,
    firstModDate: new Date("2024-11-18T09:15:00-04:00"),
    lastModDate: new Date("2024-11-18T09:15:00-04:00"),
    minutesToRead: 8,
    tags: ["quality", "efficiency", "rants"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("dumb-questions"),
  },
  {
    slug: "estimates",
    title: "Estimates",
    seoTitle: "Most of Them Are Bullshit (and How to Actually Get Them Right)",
    summary: "Most estimates are bullshit. Here's how to get them right",
    isReleased: false,
    firstModDate: new Date("2025-04-30T09:15:00-04:00"),
    lastModDate: new Date("2025-04-30T09:15:00-04:00"),
    minutesToRead: 1,
    tags: ["software", "estimates", "management"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("estimates"),
  },
  {
    slug: "founder-delusion",
    title: "Founder Delusion",
    seoTitle:
      "Your team doesn’t care about your dream. Incentives decide everything.",
    summary:
      "Your team doesn’t care about your dream. Incentives decide everything.",
    isReleased: false,
    firstModDate: new Date("2025-05-14T09:15:00-04:00"),
    lastModDate: new Date("2025-05-14T09:15:00-04:00"),
    minutesToRead: 8,
    tags: ["management", "performance"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("founder-delusion"),
  },
  {
    slug: "framer-motion",
    title: "Framer Motion",
    seoTitle: "I was missing out not using framer motion",
    summary: "I was missing out not using framer motion",
    isReleased: false,
    firstModDate: new Date("2020-02-11T09:15:00-04:00"),
    lastModDate: new Date("2020-02-11T09:15:00-04:00"),
    minutesToRead: 4,
    tags: ["react", "framer-motion"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("framer-motion"),
  },
  {
    slug: "ab-testing",
    title: "A/B Testing",
    seoTitle: "Pitfalls A/B tests for complex decisions",
    summary: "The overreliance on A/B tests for complex decisions",
    isReleased: true,
    firstModDate: new Date("2024-05-17T09:15:00-04:00"),
    lastModDate: new Date("2024-05-17T09:15:00-04:00"),
    minutesToRead: 5,
    tags: ["testing"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("ab-testing"),
  },
  {
    slug: "async-python",
    title: "Async Python",
    seoTitle: "How Async Python Works Under The Hood",
    summary: "How it really works under the hood",
    isReleased: true,
    firstModDate: new Date("2020-02-02T09:15:00-04:00"),
    lastModDate: new Date("2020-02-02T09:15:00-04:00"),
    minutesToRead: 9,
    tags: ["python", "async"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("async-python"),
  },
  {
    slug: "attention-to-detail",
    title: "Attention to Detail",
    seoTitle: "What seperates the expert from the novice",
    summary: "What seperates the expert from the novice",
    isReleased: true,
    firstModDate: new Date("2024-07-05T08:15:00-04:00"),
    lastModDate: new Date("2024-07-05T08:15:00-04:00"),
    minutesToRead: 8,
    tags: ["quality", "10x"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("attention-to-detail"),
  },
  {
    slug: "bad-management",
    title: "Bad Management",
    seoTitle: "Free perks and forced fun won't make your team work harder",
    summary: "Free perks and forced fun won't make your team work harder",
    isReleased: false,
    firstModDate: new Date("2023-10-09T09:15:00-04:00"),
    lastModDate: new Date("2023-10-09T09:15:00-04:00"),
    minutesToRead: 8,
    tags: ["management", "skill-issues"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("bad-management"),
  },
  {
    slug: "bounce-tracking",
    title: "Bounce Tracking",
    seoTitle:
      "As third-party cookies phase out, bounce tracking continues to monitor your behavior",
    summary: "As third-party cookies phase out, your behavior is still tracked",
    isReleased: true,
    firstModDate: new Date("2023-10-09T08:15:00-04:00"),
    lastModDate: new Date("2023-10-09T08:15:00-04:00"),
    minutesToRead: 4,
    tags: ["http", "cybersec", "cookies"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("bounce-tracking"),
  },
  {
    slug: "browser-fingerprinting",
    title: "Browser Fingerprinting",
    seoTitle: "Another sneaky tactic to track your online activity",
    summary: "Another sneaky tactic to track your online activity",
    isReleased: true,
    firstModDate: new Date("2023-11-04T08:15:00-04:00"),
    lastModDate: new Date("2023-11-04T08:15:00-04:00"),
    minutesToRead: 6,
    tags: ["cybersec", "privacy"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("browser-fingerprinting"),
  },
  {
    slug: "cholesterol",
    title: "Cholesterol",
    seoTitle: "How bad science hijacked medicine and destroyed public health",
    summary: "How bad science hijacked medicine and destroyed public health",
    isReleased: true,
    firstModDate: new Date("2025-02-07T09:15:00-04:00"),
    lastModDate: new Date("2025-02-07T09:15:00-04:00"),
    minutesToRead: 17,
    tags: ["cholesterol", "statins", "fat"],
    category: "HEALTH",
    mdxContentRaw: getCorresponsingMdxContent("cholesterol"),
  },
  {
    slug: "code-or-capital",
    title: "Code or Capital",
    seoTitle: "There’s hobbyist code and there’s business code",
    summary: "There’s hobbyist code and there’s business code",
    isReleased: true,
    firstModDate: new Date("2023-12-14T19:45:00-04:00"),
    lastModDate: new Date("2023-12-14T19:45:00-04:00"),
    minutesToRead: 3,
    tags: ["code", "capital"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("code-or-capital"),
  },
  {
    slug: "csrf-mitigation",
    title: "CSRF Mitigation",
    seoTitle: "CSRF Mitigation techniques",
    summary: "If you're vulnerable to XSS, none of this will work",
    isReleased: true,
    firstModDate: new Date("2020-07-04T09:15:00-04:00"),
    lastModDate: new Date("2020-07-04T09:15:00-04:00"),
    minutesToRead: 7,
    tags: ["csrf", "cybersec"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("csrf-mitigation"),
  },
  {
    slug: "data-contracts",
    title: "Data Contracts",
    seoTitle: "Data contracts prevent chaos as your product and team scale",
    summary: "Data contracts prevent chaos as your product and team scale",
    isReleased: true,
    firstModDate: new Date("2024-02-07T09:15:00-04:00"),
    lastModDate: new Date("2024-02-07T09:15:00-04:00"),
    minutesToRead: 10,
    tags: ["data", "contracts", "quality"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("data-contracts"),
  },
  {
    slug: "deadlines",
    title: "Deadlines",
    seoTitle: "Most are fake, driven by rituals, not reality",
    summary: "Most are fake, driven by rituals, not reality",
    isReleased: true,
    firstModDate: new Date("2023-08-18T09:15:00-04:00"),
    lastModDate: new Date("2023-08-18T09:15:00-04:00"),
    minutesToRead: 2,
    tags: ["deadlines", "quality", "management"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("deadlines"),
  },
  {
    slug: "debates",
    title: "Debates",
    seoTitle: "I won't debate you",
    summary: "I won't debate you",
    isReleased: true,
    firstModDate: new Date("2024-01-01T19:45:00-04:00"),
    lastModDate: new Date("2024-01-01T19:45:00-04:00"),
    minutesToRead: 3,
    tags: ["debates", "communication"],
    category: "PHILOSOPHY",
    mdxContentRaw: getCorresponsingMdxContent("debates"),
  },
  {
    slug: "frontend-perf",
    title: "Frontend Performance",
    seoTitle: "How to optimize your frontend perf metrics",
    summary: "How to optimize your frontend perf metrics",
    isReleased: true,
    firstModDate: new Date("2020-09-04T09:15:00-04:00"),
    lastModDate: new Date("2020-09-04T09:15:00-04:00"),
    minutesToRead: 4,
    tags: ["performance", "frontend"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("frontend-perf"),
  },
  {
    slug: "fundamentals",
    title: "Fundamentals",
    seoTitle: "Learn concepts, don't memorize tools",
    summary: "Learn concepts, don't memorize tools",
    isReleased: false,
    firstModDate: new Date("2024-11-14T09:15:00-04:00"),
    lastModDate: new Date("2024-11-14T09:15:00-04:00"),
    minutesToRead: 4,
    tags: ["fundamentals", "concepts", "skill-issues"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("fundamentals"),
  },
  {
    slug: "github-actions",
    title: "GitHub Actions",
    seoTitle: "Your CI is a mess. Here's how to fix it",
    summary: "Your CI is probably a mess. Here's how to fix it",
    isReleased: true,
    firstModDate: new Date("2023-07-22T09:15:00-04:00"),
    lastModDate: new Date("2023-07-22T09:15:00-04:00"),
    minutesToRead: 2,
    tags: ["ci", "github", "maintainability"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("github-actions"),
  },
  {
    slug: "gsap",
    title: "GSAP",
    seoTitle:
      "Using the Newly Added useGSAP() Hook as a Drop-in Replacement for useEffect()",
    summary:
      "Using the Newly Added useGSAP() Hook as a Drop-in Replacement for useEffect()",
    isReleased: false,
    firstModDate: new Date("2024-01-05T09:15:00-04:00"),
    lastModDate: new Date("2024-01-05T09:15:00-04:00"),
    minutesToRead: 2,
    tags: ["gsap", "react", "animation"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("gsap"),
  },
  {
    slug: "how-far-can-you-go",
    title: "Limitless",
    seoTitle:
      "535 non stop bodyweight squats in a single set. No rest, full range of motion.",
    summary: "535 non stop bodyweight squats in a single set. No rest",
    isReleased: true,
    firstModDate: new Date("2025-04-21T09:15:00-04:00"),
    lastModDate: new Date("2025-04-21T09:15:00-04:00"),
    minutesToRead: 3,
    tags: ["endurance", "possibility"],
    category: "PHILOSOPHY",
    mdxContentRaw: getCorresponsingMdxContent("how-far-can-you-go"),
  },
  {
    slug: "knowledge-hoarders",
    title: "Knowledge Hoarders",
    seoTitle: "Why Knowledge Hoarders Are a Crisis for Your Codebase",
    summary: " Tribal team knowledge will cost you in the long run",
    isReleased: true,
    firstModDate: new Date("2024-06-27T09:15:00-04:00"),
    lastModDate: new Date("2024-06-27T09:15:00-04:00"),
    minutesToRead: 6,
    tags: ["quality", "efficiency"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("knowledge-hoarders"),
  },
  {
    slug: "param-spec",
    title: "ParamSpec",
    seoTitle: "How to annotate @decorators with ParamSpec",
    summary: "How to annotate @decorators with ParamSpec",
    isReleased: true,
    firstModDate: new Date("2021-10-03T09:15:00-04:00"),
    lastModDate: new Date("2021-10-03T09:15:00-04:00"),
    minutesToRead: 2,
    tags: ["python", "decorators", "typing"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("param-spec"),
  },
  {
    slug: "referer",
    title: "Referer",
    seoTitle: "Referer & Referrer-Policy headers security implications",
    summary: "Referer & Referrer-Policy headers security implications",
    isReleased: true,
    firstModDate: new Date("2019-12-30T09:15:00-04:00"),
    lastModDate: new Date("2019-12-30T09:15:00-04:00"),
    minutesToRead: 13,
    tags: ["http", "cybersec"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("referer"),
  },
  {
    slug: "sacrificing-quality",
    title: "Sacrificing Quality",
    seoTitle: "Why Sacrificing Quality Is a Long-Term Mistake",
    summary: "Sacrificing quality is a long-term mistake",
    isReleased: true,
    firstModDate: new Date("2024-07-19T08:15:00-04:00"),
    lastModDate: new Date("2024-07-19T08:15:00-04:00"),
    minutesToRead: 8,
    tags: ["quality", "management"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("sacrificing-quality"),
  },
  {
    slug: "signed-commits",
    title: "Signed Commits",
    seoTitle: "How to use GPG and SSH to sign commits, on GitHub",
    summary: "How to use GPG and SSH to sign commits, on GitHub",
    isReleased: true,
    firstModDate: new Date("2019-09-05T09:15:00-04:00"),
    lastModDate: new Date("2019-09-05T09:15:00-04:00"),
    minutesToRead: 3,
    tags: ["git", "gpg", "ssh"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("signed-commits"),
  },
  {
    slug: "skill",
    title: "Skill",
    seoTitle: "Skill > Circumstance",
    summary:
      "Skill is the only currency that transcends environment, status, or noise",
    isReleased: false,
    firstModDate: new Date("2025-04-30T09:15:00-04:00"),
    lastModDate: new Date("2025-04-30T09:15:00-04:00"),
    minutesToRead: 5,
    tags: ["skill", "mastery", "leverage"],
    category: "PHILOSOPHY",
    mdxContentRaw: getCorresponsingMdxContent("skill"),
  },
  {
    slug: "standups",
    title: "Standups",
    seoTitle: "Why Standup Meetings Are a Waste of Time, Focus, and Dignity",
    summary: "Daily standups are a waste of time, focus, and dignity",
    isReleased: false,
    firstModDate: new Date("2025-04-30T09:15:00-04:00"),
    lastModDate: new Date("2025-04-30T09:15:00-04:00"),
    minutesToRead: 6,
    tags: ["standups", "meetings", "management"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("standups"),
  },
  {
    slug: "tests",
    title: "Testing",
    seoTitle: "The rationale behind writing tests",
    summary: "The rationale behind writing tests",
    isReleased: true,
    firstModDate: new Date("2019-06-29T09:15:00-04:00"),
    lastModDate: new Date("2019-06-29T09:15:00-04:00"),
    minutesToRead: 1,
    tags: ["testing", "quality"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("tests"),
  },
  {
    slug: "the-way-you-do-anything-is-the-way-you-do-everything",
    title: "Discipline",
    seoTitle: "The Way You Do Anything Is the Way You Do Everything",
    summary: "The way you do anything is the way you do everything",
    isReleased: true,
    firstModDate: new Date("2024-08-19T08:15:00-04:00"),
    lastModDate: new Date("2024-08-19T08:15:00-04:00"),
    minutesToRead: 6,
    tags: ["discipline", "mindset"],
    category: "PHILOSOPHY",
    mdxContentRaw: getCorresponsingMdxContent(
      "the-way-you-do-anything-is-the-way-you-do-everything",
    ),
  },
  {
    slug: "user-stories",
    title: "User Stories",
    seoTitle: "How to actually write effective user stories",
    summary: "How to actually write effective user stories",
    isReleased: true,
    firstModDate: new Date("2024-05-07T09:15:00-04:00"),
    lastModDate: new Date("2024-05-07T09:15:00-04:00"),
    minutesToRead: 5,
    tags: ["user-stories", "architecture", "srs"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("user-stories"),
  },
  {
    slug: "unit-tests",
    title: "Unit Tests",
    seoTitle: "No one likes leg day, but you should never skip it",
    summary: "No one likes leg day, but you should never skip it",
    isReleased: true,
    firstModDate: new Date("2021-12-14T09:15:00-04:00"),
    lastModDate: new Date("2021-12-14T09:15:00-04:00"),
    minutesToRead: 3,
    tags: ["testing", "quality"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("unit-tests"),
  },
  {
    slug: "white-board-interviews",
    title: "Whiteboard Interviews",
    seoTitle: "LeetCode Interviews are a bullshit humilation ritual",
    summary: "LeetCode Interviews are a bullshit humilation ritual",
    isReleased: false,
    firstModDate: new Date("2022-11-17T09:15:00-04:00"),
    lastModDate: new Date("2025-04-17T09:15:00-04:00"),
    minutesToRead: 7,
    tags: ["interviews", "leetcode", "scams"],
    category: "SOFTWARE",
    mdxContentRaw: getCorresponsingMdxContent("white-board-interviews"),
  },
];
